#!/usr/bin/expect

set timeout 5
set env(NO_COLOR) 1

source  "$env(BATS_CWD)/helper/common_expect_functions.tcl"

spawn dolt sql

expect_with_defaults                                                    {dolt-repo-.*>} { send "explain select * from t;"; }

expect_with_defaults_2 {EXPLAIN output is currently a placeholder}      {dolt-repo-.*>}   { send "\\w\r"; }

expect_with_defaults_2 {Show warnings disabled}                        {dolt-repo-.*>} { send "select 1/0;"; }

expect_with_defaults                                                    {dolt-repo-.*>} { send "exit;"; }

expect eof